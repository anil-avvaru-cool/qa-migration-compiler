# 2.1 Sample IR JSON Outputs

This document shows example JSON outputs from the enhanced IR models.

## 1. Project.json

```json
{
  "irVersion": "2.0.0",
  "projectName": "EcommerceAutomation",
  "sourceFramework": "Selenium-Java-TestNG",
  "targetFramework": "Playwright-TS",
  "architecturePattern": "POM",
  "supportsParallel": true,
  "createdOn": "2026-02-22"
}
```

## 2. Environment.json

```json
{
  "baseUrls": {
    "qa": "https://qa.example.com",
    "staging": "https://staging.example.com",
    "prod": "https://prod.example.com"
  },
  "executionMode": "parallel",
  "browsers": [
    "chrome",
    "firefox"
  ],
  "timeouts": {
    "implicit": 5000,
    "explicit": 10000,
    "pageLoad": 30000
  },
  "retryPolicy": {
    "enabled": true,
    "maxRetries": 2
  }
}
```

## 3. targets.json (Central Target Repository)

```json
{
  "targets": [
    {
      "targetId": "LOGIN_USERNAME",
      "type": "ui-element",
      "context": {
        "page": "LoginPage",
        "component": null,
        "frame": null
      },
      "semantic": {
        "role": "textbox",
        "businessName": "Username Input"
      },
      "selectorStrategies": [
        {
          "strategy": "css",
          "value": "#username",
          "stabilityScore": 0.96
        },
        {
          "strategy": "xpath",
          "value": "//input[@id='username']",
          "stabilityScore": 0.88
        },
        {
          "strategy": "id",
          "value": "username",
          "stabilityScore": 0.98
        }
      ],
      "preferredStrategy": "css"
    },
    {
      "targetId": "LOGIN_PASSWORD",
      "type": "ui-element",
      "context": {
        "page": "LoginPage",
        "component": null,
        "frame": null
      },
      "semantic": {
        "role": "textbox",
        "businessName": "Password Input"
      },
      "selectorStrategies": [
        {
          "strategy": "css",
          "value": "#password",
          "stabilityScore": 0.97
        }
      ],
      "preferredStrategy": "css"
    },
    {
      "targetId": "LOGIN_BUTTON",
      "type": "ui-element",
      "context": {
        "page": "LoginPage",
        "component": null,
        "frame": null
      },
      "semantic": {
        "role": "button",
        "businessName": "Login Button"
      },
      "selectorStrategies": [
        {
          "strategy": "css",
          "value": "#login-btn",
          "stabilityScore": 0.94
        }
      ],
      "preferredStrategy": "css"
    },
    {
      "targetId": "WELCOME_MESSAGE",
      "type": "ui-element",
      "context": {
        "page": "HomePage",
        "component": null,
        "frame": null
      },
      "semantic": {
        "role": "label",
        "businessName": "Welcome Message"
      },
      "selectorStrategies": [
        {
          "strategy": "css",
          "value": "#welcome-msg",
          "stabilityScore": 0.98
        }
      ],
      "preferredStrategy": "css"
    }
  ]
}
```

## 4. data/login_data.json

```json
{
  "dataSetId": "LOGIN_DATA",
  "type": "inline",
  "records": [
    {
      "username": "testuser1",
      "password": "Password123",
      "expectedMessage": "Welcome testuser1"
    },
    {
      "username": "testuser2",
      "password": "SecurePass456",
      "expectedMessage": "Welcome testuser2"
    }
  ]
}
```

## 5. suites/auth_suite.json

```json
{
  "suiteId": "AUTH_SUITE",
  "description": "Authentication Tests",
  "tests": [
    "TC_LOGIN_VALID_001",
    "TC_LOGIN_INVALID_002"
  ]
}
```

## 6. tests/TC_LOGIN_VALID_001.json

```json
{
  "testId": "TC_LOGIN_VALID_001",
  "suiteId": "AUTH_SUITE",
  "priority": "P1",
  "severity": "Critical",
  "dataBinding": {
    "dataSetId": "LOGIN_DATA",
    "iterationStrategy": "row-wise"
  },
  "steps": [
    {
      "stepId": "STEP_01",
      "action": "navigate",
      "targetId": null,
      "target": {
        "type": "url",
        "value": "qa:/login"
      },
      "input": null,
      "parameters": {}
    },
    {
      "stepId": "STEP_02",
      "action": "type",
      "targetId": "LOGIN_USERNAME",
      "target": null,
      "input": {
        "source": "data",
        "field": "username",
        "masked": false
      },
      "parameters": {}
    },
    {
      "stepId": "STEP_03",
      "action": "type",
      "targetId": "LOGIN_PASSWORD",
      "target": null,
      "input": {
        "source": "data",
        "field": "password",
        "masked": true
      },
      "parameters": {}
    },
    {
      "stepId": "STEP_04",
      "action": "click",
      "targetId": "LOGIN_BUTTON",
      "target": null,
      "input": null,
      "parameters": {}
    },
    {
      "stepId": "STEP_05",
      "action": "waitForVisible",
      "targetId": "WELCOME_MESSAGE",
      "target": null,
      "input": null,
      "parameters": {}
    }
  ],
  "assertions": [
    {
      "assertId": "ASSERT_01",
      "type": "equals",
      "actual": {
        "source": "ui",
        "field": null,
        "targetId": "WELCOME_MESSAGE",
        "value": null,
        "masked": false
      },
      "expected": {
        "source": "data",
        "field": "expectedMessage",
        "targetId": null,
        "value": null,
        "masked": false
      }
    }
  ],
  "tags": ["smoke", "login", "authentication"]
}
```

## Model-to-JSON Field Mapping

### ProjectIR → project.json
| Model Field | JSON Field | Note |
|-------------|-----------|------|
| irVersion | irVersion | Required: "2.0.0" |
| projectName | projectName | Required |
| sourceFramework | sourceFramework | Required: e.g., "Selenium-Java-TestNG" |
| targetFramework | targetFramework | Required: e.g., "Playwright-TS" |
| architecturePattern | architecturePattern | Optional: e.g., "POM", "POJO" |
| supportsParallel | supportsParallel | Optional: boolean |
| createdOn | createdOn | Required: "YYYY-MM-DD" format |

### TargetIR → targets.json[].targets[]
| Model Field | JSON Field | Structure |
|-------------|-----------|-----------|
| targetId | targetId | string |
| type | type | "ui-element", "api-endpoint", etc. |
| context | context | { page, component, frame } |
| semantic | semantic | { role, businessName } |
| selectorStrategies | selectorStrategies | [{ strategy, value, stabilityScore }, ...] |
| preferredStrategy | preferredStrategy | string |

### TestIR → tests/TC_*.json
| Model Field | JSON Field | Note |
|-------------|-----------|------|
| testId | testId | Required |
| suiteId | suiteId | Optional parent suite reference |
| priority | priority | Optional: P0, P1, P2, etc. |
| severity | severity | Optional: Blocker, Critical, Major, Minor |
| dataBinding | dataBinding | Optional: { dataSetId, iterationStrategy } |
| steps | steps | [StepIR, ...] |
| assertions | assertions | [AssertionIR, ...] |
| tags | tags | [string, ...] |

### StepIR Structure in JSON
```json
{
  "stepId": "STEP_01",
  "action": "navigate|type|click|select|waitForVisible|etc",
  "targetId": "TARGET_ID or null",
  "target": { "type": "url|selector", "value": "..." } or null,
  "input": { "source": "data|ui|constant", "field": "fieldname", "masked": boolean } or null,
  "parameters": { "key": "value" }
}
```

### AssertionIR Structure in JSON
```json
{
  "assertId": "ASSERT_01",
  "type": "equals|contains|exists|visible|etc",
  "actual": { "source": "ui|data", "targetId": "...", "field": "...", "value": "..." },
  "expected": { "source": "data|ui|constant", "targetId": "...", "field": "...", "value": "..." }
}
```

## File Organization Recommendation

```
project-root/
├── ir-output/
│   ├── project.json
│   ├── environment.json
│   ├── targets.json
│   ├── data/
│   │   ├── login_data.json
│   │   ├── order_data.json
│   │   └── ...
│   ├── suites/
│   │   ├── auth_suite.json
│   │   ├── order_suite.json
│   │   ├── checkout_suite.json
│   │   └── ...
│   └── tests/
│       ├── TC_LOGIN_VALID_001.json
│       ├── TC_LOGIN_INVALID_002.json
│       ├── TC_ORDER_CREATE_001.json
│       └── ...
```

## Serialization Notes

1. All models use `model_dump_json()` for JSON output
2. JSON output is deterministically sorted by key for consistency
3. Newline added at end of file for POSIX compliance
4. Field ordering matches Pydantic model definition order
5. Optional fields omitted if None (depends on Pydantic configuration)
6. Float values (stability scores) are preserved with full precision

## Validation Rules

- **targetId**: Must be unique across all targets
- **testId**: Must be unique, format typically TC_*
- **suiteId**: Must be unique, format typically *_SUITE
- **stabilityScore**: Must be between 0.0 and 1.0
- **dataSetId**: Must match between test dataBinding and data file
- **targetId in steps**: Must reference valid target from targets.json
- **createdOn**: Must be valid YYYY-MM-DD format
